# 游戏服务器客户端

这是一个统一的游戏服务器客户端，支持HTTP API和WebSocket两种连接方式。

## 功能特性

- **统一接口**: 无论使用HTTP还是WebSocket，都使用相同的API接口
- **交互式菜单**: 提供友好的命令行交互界面
- **认证管理**: 自动管理登录状态和token
- **完整功能**: 支持用户、社交、游戏等所有功能

## 构建和运行

### 构建客户端
```bash
# 构建所有服务包括客户端
make build-all

# 只构建客户端
make build-client
```

### 运行客户端
```bash
# 直接运行
go run client/main.go

# 或者运行构建好的二进制文件
./bin/client
```

## 使用说明

### 1. 选择连接方式
启动后，客户端会提示选择连接方式：
- **HTTP API**: 使用RESTful API进行通信
- **WebSocket**: 使用WebSocket进行实时通信

### 2. 主菜单功能
选择连接方式后，进入主菜单：
- **认证**: 用户注册和登录
- **用户功能**: 背包管理、物品操作
- **社交功能**: 好友系统、公会系统
- **游戏功能**: 游戏相关操作

### 3. 认证流程
1. 选择"认证"菜单
2. 选择"注册"或"登录"
3. 输入用户名、密码等信息
4. 登录成功后自动保存认证状态

### 4. 功能使用
- **背包管理**: 查看、添加、移除、使用物品
- **好友系统**: 添加好友、处理好友请求、删除好友
- **游戏功能**: 加入游戏、离开游戏、执行游戏动作

## 技术架构

### 核心组件
- `client/core/`: 统一接口定义和认证管理
- `client/http/`: HTTP客户端实现
- `client/ws/`: WebSocket客户端实现
- `client/main.go`: 主程序入口和交互逻辑

### 设计模式
- **接口抽象**: 通过`core.Client`接口统一不同实现
- **策略模式**: HTTP和WebSocket作为不同的通信策略
- **状态管理**: 全局认证状态管理

## 配置说明

### 服务器地址
- HTTP客户端默认连接: `http://localhost:8080`
- WebSocket客户端默认连接: `ws://localhost:8080/ws`

### 超时设置
- HTTP请求超时: 30秒
- WebSocket响应超时: 30秒

## 错误处理

客户端包含完善的错误处理机制：
- 网络连接错误
- 服务器响应错误
- 数据解析错误
- 用户输入验证

## 扩展说明

### 添加新功能
1. 在`core.Client`接口中添加新方法
2. 在HTTP和WebSocket实现中添加对应方法
3. 在`main.go`中添加交互逻辑

### 自定义服务器地址
修改`client/http/client.go`和`client/ws/client.go`中的`baseURL`字段。

## 注意事项

1. 确保服务器已启动并可访问
2. 登录后token会自动保存，无需重复登录
3. WebSocket模式支持实时通信，适合游戏场景
4. HTTP模式适合简单的API调用场景 